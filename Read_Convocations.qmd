---
title: "Read_Convocations"
author: "Alan Jackson"
format: html
editor: visual
---

## Read convocation coordinate file


```{r setup}

library(tidyverse)

path <- "/home/ajackson/Dropbox/Rprojects/TexasDioceseCreationCare/Data/"

```

##  Read the data

```{r read data in (and save it)}

foo <- sf::st_read(paste0(path, "The Episcopal Diocese of Texas.kml"))

Convocations <- foo %>% 
  filter(stringr::str_detect(Name, "Convocation|Region"))

#   Add convocation to parish

Parishes <- foo %>% 
  mutate(Convocation=NA)

for (i in 1:nrow(foo)){
  if (stringr::str_detect(foo[i,]$Name, "Convocation|Region")){  
    Convo <- foo[i,]$Name
  }
  print(Convo)
  Parishes[i,]$Convocation <- Convo 
}

Parishes <- Parishes %>% 
  filter(!stringr::str_detect(Name, "Convocation|Region"))
  
saveRDS(Convocations, paste0(path, "Convocations.rds"))
saveRDS(Parishes, paste0(path, "Parishes.rds"))

```


##  Plot the data

```{r plot}

#   Plot

tmap::tmap_options(basemaps="OpenStreetMap")

tmap::tmap_mode("view") # set mode to interactive plots


tmap::tm_shape(Convocations) + 
    tmap::tm_sf(alpha=0.3) +
  tmap::tm_shape(Parishes) + 
    tmap::tm_dots()


```






